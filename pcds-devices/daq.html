

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>DAQ &mdash; PCDS Devices 0.1.0+46.g6f64c87 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="PCDS Devices 0.1.0+46.g6f64c87 documentation" href="index.html"/>
        <link rel="next" title="Offset Mirrors" href="homs.html"/>
        <link rel="prev" title="IPIMB" href="ipimb.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> PCDS Devices
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0+46.g6f64c87
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Common Components</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="valves.html">Valves and Stoppers</a></li>
<li class="toctree-l1"><a class="reference internal" href="slits.html">Slits</a></li>
<li class="toctree-l1"><a class="reference internal" href="pim.html">PIM</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipimb.html">IPIMB</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">DAQ</a></li>
</ul>
<p class="caption"><span class="caption-text">Beam Steering</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="homs.html">Offset Mirrors</a></li>
<li class="toctree-l1"><a class="reference internal" href="lodcm.html">LODCM</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="device.html">Base Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface.html">Interfaces</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PCDS Devices</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>DAQ</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/daq.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="daq">
<h1>DAQ<a class="headerlink" href="#daq" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="pcdsdevices.daq.Daq">
<em class="property">class </em><code class="descclassname">pcdsdevices.daq.</code><code class="descname">Daq</code><span class="sig-paren">(</span><em>name=None</em>, <em>platform=0</em>, <em>parent=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq" title="Permalink to this definition">¶</a></dt>
<dd><p>The LCLS1 DAQ as a flyer object. This uses the pydaq module to connect with
a running daq instance, controlling it via socket commands. It can be used
as a flyer in a bluesky plan to have the daq start at the beginning of the
run and end at the end of the run. It has additional knobs for pausing
and resuming acquisition if desired.</p>
<p>Unlike a normal bluesky flyer, this has no data to report to the RunEngine
on the collect call. No data will pass into the python layer from the daq.</p>
<dl class="method">
<dt id="pcdsdevices.daq.Daq.begin">
<code class="descname">begin</code><span class="sig-paren">(</span><em>events=None</em>, <em>duration=None</em>, <em>use_l3t=None</em>, <em>controls=None</em>, <em>wait=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the daq with the current configuration. Block until
the daq has begun acquiring data. Optionally block until the daq has
finished aquiring data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>events</strong> (<em>int</em><em>, </em><em>optional</em>) – Number events to stop acquisition at.</li>
<li><strong>duration</strong> (<em>int</em><em>, </em><em>optional</em>) – Time to run the daq in seconds.</li>
<li><strong>wait</strong> (<em>bool</em><em>, </em><em>optional</em>) – If switched to True, wait for the daq to finish aquiring data.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pcdsdevices.daq.Daq.collect">
<code class="descname">collect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.collect" title="Permalink to this definition">¶</a></dt>
<dd><p>As per the bluesky interface, this is a generator that is expected to
output partial event documents. However, since we don’t have any events
to report to python, this will be a generator that immediately ends.</p>
</dd></dl>

<dl class="method">
<dt id="pcdsdevices.daq.Daq.complete">
<code class="descname">complete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.complete" title="Permalink to this definition">¶</a></dt>
<dd><p>End the current run.</p>
<p>Return a status object that will be marked as ‘done’ when the DAQ has
finished acquiring.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>end_status</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">DaqStatus</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pcdsdevices.daq.Daq.configure">
<code class="descname">configure</code><span class="sig-paren">(</span><em>events=None</em>, <em>duration=None</em>, <em>record=False</em>, <em>use_l3t=False</em>, <em>controls=None</em>, <em>always_on=False</em><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the daq’s configuration for the next run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>events</strong> (<em>int</em><em>, </em><em>optional</em>) – If provided, the daq will run for this many events before
stopping, unless we override in begin.
If not provided, we’ll use the duration argument instead.</li>
<li><strong>duration</strong> (<em>int</em><em>, </em><em>optional</em>) – If provided, the daq will run for this many seconds before
stopping, unless we override in begin.
If not provided, and events was also not provided, an empty call to
begin() will run indefinitely.</li>
<li><strong>use_l3t</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, an events argument to begin will be reinterpreted to only
count events that pass the level 3 trigger.</li>
<li><strong>record</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, we’ll record the data. Otherwise, we’ll run without
recording.</li>
<li><strong>controls</strong> (<em>dict{str: device}</em><em>, </em><em>optional</em>) – If provided, values from these will make it into the DAQ data
stream as variables. We will check device.position and device.value
for quantities to use and we will update these values each time
begin is called.</li>
<li><strong>always_on</strong> (<em>bool</em><em>, </em><em>optional</em>) – This determines our run control during a Bluesky scan with a
RunEngine attached to a Daq object.
If this is False, we will start taking events at create messages
and stop taking events at save messages. If we are configured for a
number of events or a duration, we’ll make sure to run for exactly
that long between the create and save messages, waiting in the scan
if necessary.
If this is True, we won’t provide any run control. The daq will
start recording at the beginning of the run and will stop recording
at the end of the run.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>old, new</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">tuple of dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pcdsdevices.daq.Daq.connect">
<code class="descname">connect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to the DAQ instance, giving full control to the Python process.</p>
</dd></dl>

<dl class="method">
<dt id="pcdsdevices.daq.Daq.describe_collect">
<code class="descname">describe_collect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.describe_collect" title="Permalink to this definition">¶</a></dt>
<dd><p>As per the bluesky interface, this is how you interpret the null data
from collect. There isn’t anything here, as nothing will be collected.</p>
</dd></dl>

<dl class="method">
<dt id="pcdsdevices.daq.Daq.describe_configuration">
<code class="descname">describe_configuration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.describe_configuration" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>config_desc</strong> – Mapping of config key to field metadata.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pcdsdevices.daq.Daq.disconnect">
<code class="descname">disconnect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Disconnect from the DAQ instance, giving control back to the GUI</p>
</dd></dl>

<dl class="method">
<dt id="pcdsdevices.daq.Daq.end_run">
<code class="descname">end_run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.end_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop the daq if it’s running, then mark the run as finished.</p>
</dd></dl>

<dl class="method">
<dt id="pcdsdevices.daq.Daq.kickoff">
<code class="descname">kickoff</code><span class="sig-paren">(</span><em>events=None</em>, <em>duration=None</em>, <em>use_l3t=None</em>, <em>controls=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.kickoff" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin acquisition. This method is non-blocking.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>ready_status</strong> – Status that will be marked as ‘done’ when the daq has begun to
record data.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">DaqStatus</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pcdsdevices.daq.Daq.pause">
<code class="descname">pause</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.pause" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop acquiring data, but don’t end the run.</p>
</dd></dl>

<dl class="method">
<dt id="pcdsdevices.daq.Daq.read_configuration">
<code class="descname">read_configuration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.read_configuration" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>config</strong> – Mapping of config key to current configured value.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pcdsdevices.daq.Daq.resume">
<code class="descname">resume</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.resume" title="Permalink to this definition">¶</a></dt>
<dd><p>Continue acquiring data in a previously paused run.</p>
</dd></dl>

<dl class="method">
<dt id="pcdsdevices.daq.Daq.stage">
<code class="descname">stage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.stage" title="Permalink to this definition">¶</a></dt>
<dd><p>Nothing to be done here, but we overwrite the default stage because it
is expecting sub devices.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>staged</strong> – list of devices staged</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="pcdsdevices.daq.Daq.state_enum">
<code class="descname">state_enum</code><a class="headerlink" href="#pcdsdevices.daq.Daq.state_enum" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">pydaq</span> <span class="pre">state</span></code></p>
</dd></dl>

<dl class="method">
<dt id="pcdsdevices.daq.Daq.stop">
<code class="descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop the current acquisition, ending it early.</p>
</dd></dl>

<dl class="method">
<dt id="pcdsdevices.daq.Daq.unstage">
<code class="descname">unstage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.unstage" title="Permalink to this definition">¶</a></dt>
<dd><p>Nothing to be done here, but we overwrite the default stage because it
is expecting sub devices.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>unstaged</strong> – list of devices unstaged</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pcdsdevices.daq.Daq.wait">
<code class="descname">wait</code><span class="sig-paren">(</span><em>timeout=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pcdsdevices.daq.Daq.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Pause the thread until the DAQ is done aquiring.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>timeout</strong> (<em>float</em>) – Maximum time to wait in seconds.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="homs.html" class="btn btn-neutral float-right" title="Offset Mirrors" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ipimb.html" class="btn btn-neutral" title="IPIMB" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, SLAC National Accelerator Laboratory.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.0+46.g6f64c87',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>